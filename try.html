<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script>
        const token = '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'; // Replace with your actual token
        const userName = 'yousef249495';
        const repoName = 'json';
        const filePath = 'uAndp.json';

        async function fetchData(userName) {
            try {
                const response = await fetch(`https://api.github.com/users/${userName}/repos`);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching repositories:', error);
                return [];
            }
        }

        async function fetchFileContent(repoName, filePath) {
            try {
                const response = await fetch(`https://api.github.com/repos/${userName}/${repoName}/contents/${filePath}`, {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const data = await response.json();
                const fileContent = atob(data.content); // Decode base64 content
                console.log('File Content:', fileContent);

                try {
                    const jsonContent = JSON.parse(fileContent);
                    console.log('JSON Content:', jsonContent);
                } catch (e) {
                    console.error('Error parsing JSON:', e);
                }
            } catch (error) {
                console.error('Error fetching file content:', error);
            }
        }

        async function displayRepos() {
            const repos = await fetchData(userName);

            if (repos.length === 0) {
                console.log('No repositories found or an error occurred.');
            } else {
                const jsonRepo = repos.find(repo => repo.name === repoName);

                if (jsonRepo) {
                    console.log('Found JSON repository:', jsonRepo);
                    await fetchFileContent(repoName, filePath);
                } else {
                    console.log('Repository named "json" not found.');
                }
            }
        }

        displayRepos();
    </script>

</body>

</html>